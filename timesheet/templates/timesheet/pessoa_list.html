{% extends "timesheet/base_logged.html"%} {% load humanize %} {% block content_block %}
<h1 class="text-center">
	<i class="fa fa-users"></i>
	Lista de Usuários
</h1>
<hr />
<div class="row">
	<a class="btn btn-primary" href="{% url 'timesheet:nova_pessoa' %}">
		<i class="fa fa-user"></i>
		<i class="fa fa-plus"></i>
		Cadastrar Usuário
	</a>
</div>
{% if is_paginated %}
<div class="row">{% include 'timesheet/includes/pagination.html' with href='timesheet:lista_pessoas' page_obj=page_obj %}</div>
{% else %}
<br />
{% endif %}
<div class="row">
	<div class="table-responsive">
		<table id="tabela" class="table table-bordered table-striped table-hover table-condensed">
			<thead>
				<tr>
					<th>ID</th>
					<th>Dados</th>
					<th>Data de Criação</th>
					<th>Último login</th>
					<th></th>
				</tr>
			</thead>
			<tbody>
				{% if object_list %} {% for pessoa in object_list %}
				<tr>
					<th>
						<strong>{{pessoa.id}}</strong>
					</th>
					<td>
						<i class="fa fa-user"></i>
						<strong>{{pessoa.usuario.get_full_name|capfirst|default:"Sem nome definido"}} ({{ pessoa.usuario.get_username }})</strong>
						<br />
						{{pessoa.documento.tipo_documento.abreviacao}}: {{pessoa.documento.codigo|mask:pessoa.documento.tipo_documento.mascara}}
					</td>
					<td>{{pessoa.usuario.date_joined|naturaltime}}</td>
					<td>{{pessoa.usuario.last_login|naturaltime|default:"Ainda não autenticou"}}</td>
					<td>
						<a class="btn btn-default btn-sm" href="{% url 'timesheet:visualizar_pessoa' pessoa.id %}">
							<i class="fa fa-eye"></i>
						</a>
						<button type="button" data-target="#confirmModal" data-toggle="modal" data-href="{% url 'timesheet:remover_pessoa' pessoa.id %}" data-nome="{{ pessoa.usuario.first_name }}"
							class="btn btn-default btn-sm">
							<i class="fa fa-trash"></i>
						</button>
					</td>
				</tr>
				{% endfor %} {% else %}
				<tr colspan="5">
					<p>Nenhum usuário cadastrado.</p>
				</tr>
				{% endif %}
			</tbody>
		</table>
	</div>
</div>
{% if is_paginated %}
<div class="row">{% include 'timesheet/includes/pagination.html' with href='timesheet:lista_pessoas' page_obj=page_obj %}</div>
{% endif %} {% endblock %} {% block js_block %} {% include 'timesheet/includes/modal_remover_pessoa.html' %} {% endblock %}
